"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[46642,52302],{14496:(e,t,n)=>{n.d(t,{b:()=>C});var r=n(74848),a=n(21728),l=n(94236),s=n(21373),o=n(5524),i=n(73077),c=n(38621),u=n(51120),d=n(42455),m=n(69599),h=n(95869),p=n(77430),g=n(78223);function f(e){let t,n,l,s=(0,a.c)(12),{topLevelAgents:i,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return s[0]!==d||s[1]!==u||s[2]!==i?(t=i.length>0&&(0,r.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,r.jsx)(o.l.GroupHeading,{children:"Agents"}),i.map(e=>{let t=(0,g.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,a=!u?.typeName&&t,l=n||a;return(0,r.jsxs)(o.l.Item,{disabled:!1,selected:l,onSelect:()=>d(l?{}:{typeName:"topLevel",topLevelAgentId:e.id}),children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(p.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),s[0]=d,s[1]=u,s[2]=i,s[3]=t):t=s[3],s[4]!==c||s[5]!==d||s[6]!==u||s[7]!==i.length?(n=c.length>0&&(0,r.jsxs)(r.Fragment,{children:[i.length>0&&(0,r.jsx)(o.l.Divider,{}),(0,r.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,r.jsx)(o.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,r.jsx)(o.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name}),children:e.display_name||e.name},e.name)})]})]}),s[4]=c,s[5]=d,s[6]=u,s[7]=i.length,s[8]=n):n=s[8],s[9]!==t||s[10]!==n?(l=(0,r.jsxs)(r.Fragment,{children:[t,n]}),s[9]=t,s[10]=n,s[11]=l):l=s[11],l}try{f.displayName||(f.displayName="AgentListItems")}catch{}var y=n(82156),b=n(63422),v=n(96540);function C(e){let t,n,i,C,I,x,w,A,N,k,j,P,L,R=(0,a.c)(49),{repo:E,branch:$,selectedAgent:O,onSelectAgent:T,iconOnly:B,disabled:F}=e,G=void 0===B||B,M=void 0!==F&&F;R[0]!==E?(t={repo:E},R[0]=E,R[1]=t):t=R[1];let{data:q,isLoading:D}=function(e){let t,n,r=(0,a.c)(4),{repo:l}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("agent_session_retry_fetch_capi_on_401"),r[0]=t):t=r[0];let s=t;return r[1]!==l.nameOnly||r[2]!==l.owner?(n={queryKey:["custom-agents",l.owner,l.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${l.owner}/${l.nameOnly}`,retryOn401:s});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},r[1]=l.nameOnly,r[2]=l.owner,r[3]=n):n=r[3],(0,d.b)(n)}(t);R[2]!==q?(n=void 0===q?[]:q,R[2]=q,R[3]=n):n=R[3];let K=n,{data:V,isLoading:W}=(0,h.n)(E.nameWithOwner);R[4]!==V?(i=void 0===V?[]:V,R[4]=V,R[5]=i):i=R[5];let H=i,U=E.isEmpty||!$||D||W;R[6]!==K||R[7]!==H?(C=[...H,...K],R[6]=K,R[7]=H,R[8]=C):C=R[8];let Q=C;R[9]!==Q||R[10]!==U||R[11]!==T||R[12]!==O?(x=()=>{U||0===Q.length||!O?.typeName||("topLevel"===O.typeName?Q.some(e=>"id"in e&&e.id===O.topLevelAgentId):Q.some(e=>"name"in e&&e.name===O.subAgentSlug))||T({})},I=[U,Q,O,T],R[9]=Q,R[10]=U,R[11]=T,R[12]=O,R[13]=I,R[14]=x):(I=R[13],x=R[14]),(0,v.useEffect)(x,I);let z=S,J=z(O)?"Copilot":O,Y="string"==typeof J?"Copilot"===J?"topLevel":"customSubAgent":J.typeName;if(R[15]!==Y||R[16]!==Q||R[17]!==$||R[18]!==M||R[19]!==J||R[20]!==G||R[21]!==U||R[22]!==E||R[23]!==O){let e,t,n,a,o,i,u=Q.find(e=>"string"==typeof J?e.display_name===J:"topLevel"===Y?"id"in e&&e.id===J.topLevelAgentId:"customSubAgent"===Y?"name"in e&&e.name===J.subAgentSlug:void 0);e:{if("string"==typeof J){e=J;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if(R[28]!==$||R[29]!==E.nameOnly||R[30]!==E.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:`---
# Fill in the fields below to create a basic custom agent for your repository.
# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli
# To make this agent available, merge this file into the default repository branch.
# For format details, see: https://gh.io/customagents/config

name:
description:
---

# My Agent

Describe what your agent does here...`});t=E.owner,n=E.nameOnly,a=$,o=e.toString(),R[28]=$,R[29]=E.nameOnly,R[30]=E.owner,R[31]=t,R[32]=n,R[33]=a,R[34]=o}else t=R[31],n=R[32],a=R[33],o=R[34];N=`/${t}/${n}/new/${a}?${o}`;t:{if(z(O)){i=!0;break t}if("topLevel"===O.typeName&&u&&"slug"in u){i=(0,g.sS)(u.slug);break t}i=!1}let m=i,h=d||"None",f=d?`${"topLevel"===Y?"Agent":"Custom agent"}: ${d}`:"Select an agent";A=l.W,w=l.W.Anchor,k=G?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:a,ariaLabel:l,disabled:o}){return e?(0,r.jsx)(s.Q,{"aria-label":"Loading agents",disabled:!0,className:"AgentSelector-module__avatarButtonSkeleton--jkY1N",children:(0,r.jsx)(y.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,r.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":l,selected:!1,disabled:o}):n&&"object"==typeof n&&"customSubAgent"===a?(0,r.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o}):n&&"object"==typeof n&&"avatar_url"in n?(0,r.jsx)(s.Q,{"aria-label":l,disabled:o||e,className:"AgentSelector-module__avatarButton--vp2Ab",children:(0,r.jsx)(p.r,{src:n.avatar_url,size:18,square:!0})}):(0,r.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o})}({isLoading:U,isCopilotSelected:m,selectedAgentObj:u,agentType:Y,ariaLabel:f,disabled:M}):(0,r.jsx)(s.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":f,className:"AgentSelector-module__anchor--SnbmM","data-selected":!!u,disabled:M||U,children:h}),R[15]=Y,R[16]=Q,R[17]=$,R[18]=M,R[19]=J,R[20]=G,R[21]=U,R[22]=E,R[23]=O,R[24]=w,R[25]=A,R[26]=N,R[27]=k}else w=R[24],A=R[25],N=R[26],k=R[27];return R[35]!==w||R[36]!==k?(j=(0,r.jsx)(w,{children:k}),R[35]=w,R[36]=k,R[37]=j):j=R[37],R[38]!==Q.length||R[39]!==K||R[40]!==N||R[41]!==T||R[42]!==O||R[43]!==H?(P=(0,r.jsx)(l.W.Overlay,{width:"auto",children:0===Q.length?(0,r.jsx)(_,{newFileUrl:N}):(0,r.jsxs)(o.l,{children:[(0,r.jsx)(f,{topLevelAgents:H,customAgents:K,selectedAgent:O,onSelectAgent:T}),(0,r.jsx)(o.l.Divider,{}),(0,r.jsx)(o.l.Group,{selectionVariant:!1,children:(0,r.jsxs)(o.l.LinkItem,{href:N,target:"_blank",children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]})}),R[38]=Q.length,R[39]=K,R[40]=N,R[41]=T,R[42]=O,R[43]=H,R[44]=P):P=R[44],R[45]!==A||R[46]!==j||R[47]!==P?(L=(0,r.jsxs)(A,{children:[j,P]}),R[45]=A,R[46]=j,R[47]=P,R[48]=L):L=R[48],L}function S(e){return!e?.typeName}let _=e=>{let t,n,l,s=(0,a.c)(4),{newFileUrl:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle--coj6M",children:"This repository has no custom agents"}),n=(0,r.jsx)("p",{className:"AgentSelector-module__emptyStateDescription--C58Xx",children:"Custom agents are reusable instructions and tools in your repository."}),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==o?(l=(0,r.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer--FrxRO",children:[t,n,(0,r.jsx)(i.z,{href:o,children:"Create a custom agent"})]}),s[2]=o,s[3]=l):l=s[3],l};try{C.displayName||(C.displayName="AgentSelector")}catch{}try{_.displayName||(_.displayName="EmptyState")}catch{}},25811:(e,t,n)=>{n.d(t,{s:()=>s});var r=n(21728),a=n(96540),l=n(64846);function s(){let e,t,n,s=(0,r.c)(7),{value:o,setValue:i}=(0,l.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");s[0]!==o?(e=()=>o??{},s[0]=o,s[1]=e):e=s[1];let[c,u]=(0,a.useState)(e);s[2]!==i?(t=e=>{u(e),i(e)},s[2]=i,s[3]=t):t=s[3];let d=t;return s[4]!==c||s[5]!==d?(n=[c,d],s[4]=c,s[5]=d,s[6]=n):n=s[6],n}},34267:(e,t,n)=>{n.d(t,{D:()=>s,t:()=>o});var r=n(74848),a=n(96540);let l=(0,a.createContext)({updateOpenState:()=>void 0,anyItemPickerOpen:()=>!1});function s({children:e}){let t=(0,a.useRef)({}),n=(0,a.useCallback)((e,n)=>{let r=t.current;return r[e]===n||(t.current={...r,[e]:n}),t.current},[]),s=(0,a.useCallback)(()=>Object.values(t.current).some(e=>e),[t]),o=(0,a.useMemo)(()=>({updateOpenState:n,anyItemPickerOpen:s}),[s,n]);return(0,r.jsx)(l.Provider,{value:o,children:e})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useItemPickersContext must be used within a ItemPickersContextProvider.");return e}try{l.displayName||(l.displayName="ItemPickersContext")}catch{}try{s.displayName||(s.displayName="ItemPickersContextProvider")}catch{}},34295:(e,t,n)=>{n.d(t,{l:()=>AgentSessionsTokenProvider});var r=n(65411);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends r.JR{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},42455:(e,t,n)=>{n.d(t,{b:()=>u});var r=n(97286),a=n(51120),l=n(97189),s=n(34295),o=n(96540),i=n(65411),c=n(69599);function u(...e){let t=(0,r.I)(...e),{numberOf401s:n,increment401s:d,reset401s:m}=(0,l.eS)(),{isError:h,isLoading:p,error:g}=t;return(0,o.useEffect)(()=>{h&&g instanceof a.Y&&401===g.status?n>=5?(((0,c.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new s.l).removeLocalStorageAuthToken(),m()):d():h||p||!(n>0)||m()},[h,p,g,d,m,n]),t}},46642:(e,t,n)=>{n.d(t,{P:()=>u});var r=n(74848),a=n(96540),l=n(38621),s=n(69497),o=n(21373),i=n(70170),c=n(86391);function u({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:u,selectAllOption:d,additionalButtonProps:m,buttonText:h="",width:p,truncateMaxWidth:g,height:f,fullscreenOnNarrow:y,defaultOwner:b,onLoad:v,loadingElement:C,liveSelection:S=!1,onOpen:_}){let[I,x]=(0,a.useState)(""),[w,A]=(0,a.useState)([]),[N,k]=(0,a.useState)(!0),j=(0,a.useCallback)((0,i.s)(async e=>{try{let n=await t(e,b);A(n),v?.(n)}catch{}k(!1)},200),[t,b]);(0,a.useEffect)(()=>{k(!0),j(I)},[I,j,k]);let P=(0,a.useCallback)(e=>{"single"===u?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[u,n]),L=(0,a.useMemo)(()=>"multiple"===u?e||[]:e?[e]:[],[u,e]),R=(0,a.useCallback)(e=>{let t,n="medium"===p?35:"large"===p?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,r.jsx)(l.RepoLockedIcon,{size:16}):(0,r.jsx)(l.RepoIcon,{size:16})}},[p]),E=(0,a.useCallback)(e=>e.name,[]),$=(0,a.useMemo)(()=>{let e=[];return e.push(...w),d&&e.push({name:"$all$",_all:!0}),e},[w,d]),O=h,T=l.RepoIcon;return O||("multiple"===u?O=L.length>0?`${L.length} repositor${L.length>1?"ies":"y"}`:"Select repositories":L.length>0&&L[0]?(O=L[0].name,T=L[0].private?l.RepoLockedIcon:l.RepoIcon):O=d?"All repositories":"Select a repository"),C&&N&&!e?C:(0,r.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,r.jsx)(o.Q,{leadingVisual:T,trailingAction:l.TriangleDownIcon,"aria-labelledby":e,...t,...m,children:(0,r.jsx)(s.A,{title:O,maxWidth:g??195,children:O})}),placeholderText:"Search",items:$,loading:N,groups:d?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:u,initialSelectedItems:L,onSelectionChange:P,onLiveSelectionChange:S?P:void 0,filterItems:x,getItemKey:E,convertToItemProps:R,title:"Select a repository",width:p,height:f,responsiveOnNarrow:y,onOpen:_})}try{u.displayName||(u.displayName="ReposSelector")}catch{}},51120:(e,t,n)=>{n.d(t,{I:()=>c,Y:()=>FetchCAPIError});var r=n(50467),a=n(34295),l=n(25641),s=n(21067),o=n(69599),i=n(65411);let FetchCAPIError=class FetchCAPIError extends Error{constructor(e,t){super(e),(0,r._)(this,"status",void 0),this.name="FetchCAPIError",this.status=t}};async function c({path:e,method:t="GET",streamingResponse:n=!1,body:r,retryOn401:l=!1}){let c=(0,o.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new a.l;return u({path:e,method:t,streamingResponse:n,body:r,basePath:(0,s._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:l},c)}async function u(e,t,n=0){let r=await t.getAuthToken();if(!r)throw Error("No token available");let a=await (0,l.p)({authToken:r,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body});if(!a.ok){if(e.retryOn401&&401===a.status&&n<1)return t.removeLocalStorageAuthToken(),u(e,t,n+1);let r="error"in a?a.error:`Failed CAPI request (${a.status})`;if("response"in a&&a.response)try{let e=await a.response.text();e&&e.trim()&&(r=e.trim())}catch{}throw new FetchCAPIError(r,a.status)}return a}},57019:(e,t,n)=>{n.d(t,{A:()=>s,_:()=>o});var r=n(88431),a=n(44569),l=n(96540);let s={ctrlKey:"ctrlKey",altKey:"altKey",shiftKey:"shiftKey",metaKey:"metaKey"},o=(e,t,n)=>{let o=(0,l.useRef)(t);(0,r.N)(()=>{o.current=t});let i=(0,l.useCallback)(t=>{(![...document.querySelectorAll('#__primerPortalRoot__, [id$="-portal-root"]')].some(function e(t){if(t.clientHeight>0)return!0;for(let n of t.children)if(e(n))return!0;return!1})||n?.triggerWhenPortalIsActive)&&(function(e,t){for(let n of Object.values(s))if(t&&t[n]&&!e[n]||e[n]&&(!t||!t[n]))return!1;return!0}(t,n)||n?.ignoreModifierKeys)&&!(!n?.triggerWhenInputElementHasFocus&&(0,a.fg)(t.target))&&e.some(e=>/^\d$/.test(e)?t.code===`Digit${e}`:"/"===e?"Slash"===t.code:t.key===e)&&o.current(t)},[e,n]);(0,l.useEffect)(()=>{let e=n?.scopeRef?.current||document;return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[i,n?.scopeRef])}},63422:(e,t,n)=>{n.d(t,{L:()=>o});var r=n(74848),a=n(21728),l=n(26108),s=n(34164);let o=(0,n(96540).forwardRef)((e,t)=>{let n,o,i,c,u,d,m=(0,a.c)(11);m[0]!==e?({selected:c,icon:n,selectedIcon:o,...i}=e,m[0]=e,m[1]=n,m[2]=o,m[3]=i,m[4]=c):(n=m[1],o=m[2],i=m[3],c=m[4]);let h=c&&o?o:n;return m[5]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.$)("IconButtonSelector-module__anchor--t8Bzw"),m[5]=u):u=m[5],m[6]!==h||m[7]!==t||m[8]!==i||m[9]!==c?(d=(0,r.jsx)(l.K,{...i,className:u,icon:h,"data-selected":c,ref:t}),m[6]=h,m[7]=t,m[8]=i,m[9]=c,m[10]=d):d=m[10],d});o.displayName="IconButtonSelector"},64846:(e,t,n)=>{n.d(t,{Q:()=>l});var r=n(82075),a=n(96540);function l(e){let t=(0,r.D)("localStorage");return{value:(0,a.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},67126:(e,t,n)=>{n.d(t,{S:()=>r});let r={couldNotUpdateAssignees:"Could not update assignees",couldNotSearchAssignees:"Could not search assignees",couldNotUpdateLabels:"Could not update labels",couldNotSearchLabels:"Could not search labels",couldNotUpdateMilestone:"Could not update milestone",couldNotUpdateType:"Could not update type",couldNotSearchMilestones:"Could not search milestones",couldNotUpdateIssueType:"Could not update issue type",couldNotSearchRepositories:"Could not search repositories",couldNotSearchPullRequests:"Could not search pull requests",couldNotSearchProjects:"Could not search projects",couldNotSearchBranches:"Could not search branches",noMatches:"No matches",noResults:"No results",couldNotCreateBranch:"Could not create branch",couldNotCreateLabel:"Could not create label",couldNotCreateMilestone:"Could not create milestone",branchAlreadyExists:e=>`The branch ${e} already exists.`}},74563:(e,t,n)=>{n.d(t,{B:()=>r});let r={itemPickerRootId:"item-picker-root-id",itemPickerTestId:"item-picker-root"}},76027:(e,t,n)=>{n.d(t,{Z:()=>r});let r={activePickerOption:e=>`[data-id="${e}"] [data-is-active-descendant="activated-directly"]`}},78223:(e,t,n)=>{function r(e){return"copilot-swe-agent"===e}function a(e,t){return!e.topLevelAgentId||r(t)||!!e.subAgentSlug}n.d(t,{CF:()=>a,sS:()=>r})},86391:(e,t,n)=>{n.d(t,{D:()=>y,O:()=>f});var r=n(74848),a=n(69599),l=n(53419),s=n(83494),o=n(57019),i=n(93330),c=n(5839),u=n(50279),d=n(96540),m=n(74563),h=n(76027),p=n(34267),g=n(89850);function f({items:e,initialSelectedItems:t,placeholderText:n,selectionVariant:f="single",loading:b,groups:v,filterItems:C,renderAnchor:S,getItemKey:_,convertToItemProps:I,onSelectionChange:x,onOpen:w,onClose:A,onLiveSelectionChange:N,eventsTag:k,height:j="small",width:P="small",selectPanelRef:L,enforceAtleastOneSelected:R,insidePortal:E,maxVisibleItems:$=9,nested:O=!1,resultListAriaLabel:T,title:B,subtitle:F,preventClose:G,triggerOpen:M,initialFilter:q,customNoResultsItem:D,customNoMatchItem:K,footer:V,keybindingCommandId:W,pickerId:H,responsiveOnNarrow:U,secondaryAction:Q,notice:z,className:J,improvedNoMatchAccessibility:Y,noMatchMessage:X,suppressNoMatchItem:Z}){let[ee,et]=(0,d.useState)(M??!1),[en,er]=(0,d.useState)(()=>ee?Date.now():null),[ea,el]=(0,d.useState)([]),[es,eo]=(0,d.useState)(q??""),ei=(0,d.useDeferredValue)(es),{updateOpenState:ec,anyItemPickerOpen:eu}=(0,p.t)(),[ed,em]=(0,d.useState)(!1),eh=(0,d.useId)();H&&(eh=H);let ep=U||(0,a.G7)("primer_react_select_panel_fullscreen_on_narrow");(0,i.w)(()=>{em(window.innerWidth<768)});let eg=(0,d.useCallback)(e=>{et(e),e?er(Date.now()):er(null)},[et]);(0,d.useEffect)(()=>{void 0!==M&&eg(M)},[eg,M]);let ef=(0,d.useCallback)(()=>{eu()||ee||(eg(!0),w&&w())},[eu,ee,eg,w]);(0,d.useEffect)(()=>{ec(eh,ee)},[eh,ee,ec]);let ey=(0,d.useMemo)(()=>new Map,[eh,t]),eb=(0,d.useCallback)(e=>{for(let[,t]of ey)t!==e&&(t.selected=!1)},[ey]),ev=(0,d.useCallback)(e=>"string"==typeof e?e:_(e),[_]),eC=(0,d.useCallback)((e,n)=>{if(G&&!e||"cancel"===n)return;if(!e&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),eg(e),e&&w)return void w();eo(""),A&&A();let r=[...ey.values()].filter(e=>e.selected).map(e=>e.source);if(r.length!==t.length||r.some(e=>!t.some(t=>ev(t)===_(e)))){if(en&&k){let e=Date.now()-en,n=r.filter(e=>!t.some(t=>ev(t)===_(e))).length,a=t.filter(e=>!r.some(t=>ev(t)===_(e))).length;(0,l.BI)(`item-picker-${k}-selection-duration`,{selectionDuration:e,totalItemsCount:r.length,addedItemsCount:n,removedItemsCount:a})}x(r)}},[G,eg,w,A,ey,t,ev,_,en,k,x]),eS=(0,d.useCallback)((e,t)=>{let n=_(e),r=ey.get(n),a=I(e);if(r)return{...r,disabled:a.disabled};(r=a).selected=t;let l=r.onAction;return r.onAction=(t,r)=>{let a=ey.get(n);a&&(a.selected=!a.selected,"single"===f&&e.id!==es&&eb(a),l&&l(t,r))},ey.set(n,r),r},[I,es,_,ey,f,eb]),e_=(0,d.useMemo)(()=>{let n=e.map(e=>e.__isNew__?(delete e.__isNew__,K&&ey.delete(_(K)),eS(e,!0)):eS(e,t.some(t=>ev(t)===_(e))));return 0===n.length?Y?[]:K?[eS(K,!1)]:Z?[]:es?[K?eS(K,!1):g.Q3]:[D??g.v8]:n},[K,e,ey,eS,t,ev,_,es,D,Y,Z]);(0,d.useEffect)(()=>{el(e_.filter(e=>e.selected))},[e_]);let eI=(0,d.useMemo)(()=>"single"===f?ea[0]:ea,[ea,f]),ex=(0,d.useCallback)(e=>{if(void 0===e){R||el([]);return}let t=(Array.isArray(e)?e:[e]).map(e=>e_.find(t=>e.id===t.id)).filter(e=>void 0!==e);el(t),N&&N(t.map(e=>e.source))},[R,e_,N]);(0,o._)([" "],e=>{if(ee){let t=document.querySelector(h.Z.activePickerOption(m.B.itemPickerRootId));if(t){let n=t.getAttribute("data-id"),r=[...ey.values()].find(e=>e.id===n);if(r){if(I(r.source).disabled)return;e.preventDefault(),e.stopPropagation(),r.selected=!r.selected,el([...ey.values()].filter(e=>e.selected)),N&&N([...ey.values()].filter(e=>e.selected).map(e=>e.source))}}}},{triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!0});let ew=(0,d.useCallback)(()=>{if(G)return;eo("");let e=[...ey.values()].filter(e=>e.selected).map(e=>e.source);if(e.length!==t.length||e.some(e=>!t.some(t=>ev(t)===_(e)))){for(let e of ey.values())t.some(t=>ev(t)===_(e.source))?e.selected=!0:e.selected=!1;el([...ey.values()].filter(e=>e.selected))}eg(!1),A&&A()},[G,ey,t,eg,A,ev,_]);(0,d.useEffect)(()=>{C(ei)},[ei,C]);let eA=e_.length>0;1===e_.length&&(e_[0].id===g.Q3.id||e_[0].id===g.v8.id)&&(eA=!1);let eN=(0,d.useMemo)(()=>v&&v?.length>1&&eA?{groupMetadata:v}:{},[v,eA]),ek=y(E,L,e_.length<=$?"auto":j,ed&&ep),ej=(0,d.useMemo)(()=>X||(es?{variant:"empty",title:"No matches found",body:"Try a different search term"}:{variant:"empty",title:"No items to show",body:""}),[X,es]),eP=(0,d.useMemo)(()=>({renderAnchor:S,placeholderText:n,open:ee,onOpenChange:eC,loading:b,items:e_,selected:eI,onSelectedChange:ex,filterValue:es,onFilterChange:eo,showItemDividers:!0,overlayProps:{width:P,className:J,...ek},...eN,"aria-label":T,"data-id":m.B.itemPickerRootId,"data-testid":m.B.itemPickerTestId,title:B,subtitle:F,footer:V,onCancel:ew,secondaryAction:Q,notice:z,message:Y&&0===e_.length?ej:void 0}),[S,n,ee,eC,b,e_,eI,ex,es,P,ek,eN,T,B,F,V,ej,ew,Q,z,J,Y]);return(0,r.jsxs)(u.g,{flags:{primer_react_select_panel_fullscreen_on_narrow:void 0===V&&ep},children:[W&&(0,r.jsx)(s.ak,{commands:{[W]:ef}}),(0,r.jsx)(c.X,{anchorRef:O?void 0:L,...eP})]})}function y(e,t,n,r=!1){let a=e?"large":n;if(!e||!t?.current)return{height:a};let{top:l}=t.current.getBoundingClientRect(),s=r?0:l-436;return s<0?{height:a}:{height:a,top:s,position:"fixed"}}try{f.displayName||(f.displayName="ItemPicker")}catch{}},89850:(e,t,n)=>{n.d(t,{A2:()=>o,Q3:()=>l,v8:()=>s});var r=n(38621),a=n(67126);let l={leadingVisual:r.CircleSlashIcon,text:a.S.noMatches,disabled:!0,selected:void 0,key:"no-matches",id:"no-matches"},s={leadingVisual:r.CircleSlashIcon,text:a.S.noResults,disabled:!0,selected:void 0,key:"no-results",id:"no-results"},o=(e="",t="",n="")=>{let r=e&&`owner:${e.trim()} `,a=n&&`repo:${n.trim()} `,l=t&&`${t.trim()}`,s=(e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/issues\/\d+$/).test(e)})(t),o="in:title",i=l&&"#"===l.charAt(0)?l.slice(1):l;i&&!isNaN(Number(i))&&(o+=" in:number");let c=`${r}${a}is:issue ${o}`;return{commenters:`${c} commenter:@me ${l}`.trim(),mentions:`${c} mentions:@me ${l}`.trim(),assignee:`${c} assignee:@me ${l}`.trim(),author:`${c} author:@me ${l}`.trim(),other:`${c} ${l}`.trim(),resource:s?encodeURI(t):"",queryIsUrl:s}}},92352:(e,t,n)=>{n.d(t,{s:()=>y,P:()=>v});var r=n(74848),a=n(21728),l=n(14496),s=n(97189),o=n(69599),i=n(66990),c=n(46642),u=n(96379),d=n(38621),m=n(82156),h=n(26108),p=n(96540),g=n(79064),f=n(63422);let y=e=>{let t,n,u,y,S,_,I,x=(0,a.c)(30),{hideRepoSelector:w,initialRepoNWO:A,initialBranch:N,selectedRepo:k,selectedBranch:j,selectedAgent:P,onRepoSelect:L,onBranchSelect:R,onAgentSelect:E,agentSelectionEnabled:$}=e,O=void 0===$||$,T=(0,p.useRef)(!1);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("swe_agent_member_requests_agent_panel"),x[0]=t):t=x[0];let B=t;x[1]!==N||x[2]!==A||x[3]!==R||x[4]!==L||x[5]!==k?(n=e=>{let t;if(!k&&!T.current){if(A&&(t=e.find(e=>e.nameWithOwner===A))&&(t.enabled||B&&b(t))){L(t),R(N||t.defaultBranch),T.current=!0;return}let n=g.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&(t.enabled||B&&b(t))){L(t),R(t?.defaultBranch),T.current=!0;return}}let r=e.find(C);r?(L(r),R(r.defaultBranch),T.current=!0):t&&(L(t),R(N||t.defaultBranch),T.current=!0)}},x[1]=N,x[2]=A,x[3]=R,x[4]=L,x[5]=k,x[6]=n):n=x[6];let F=n;x[7]!==A?(u=(e,t)=>v(e,t,A),x[7]=A,x[8]=u):u=x[8];let G=u;return x[9]!==w||x[10]!==R||x[11]!==F||x[12]!==L||x[13]!==G||x[14]!==k?(y=!w&&(0,r.jsx)(c.P,{repositoryLoader:G,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(L(e),R(e.defaultBranch))},currentSelection:k,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${k?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton--tAnOR"},onLoad:F,loadingElement:(0,r.jsx)(m.f,{width:"150px",height:"32px"})}),x[9]=w,x[10]=R,x[11]=F,x[12]=L,x[13]=G,x[14]=k,x[15]=y):y=x[15],x[16]!==R||x[17]!==j||x[18]!==k?(S=(0,r.jsx)(r.Fragment,{children:k?(0,r.jsx)(i.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:j??k.defaultBranch,defaultBranch:k.defaultBranch,owner:k.owner,repo:k.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:R,renderAnchor:e=>(0,r.jsx)(f.L,{...e,icon:d.GitBranchIcon,selectedIcon:d.GitBranchCheckIcon,selected:j!==k.defaultBranch,"aria-label":`Branch: ${j||"Select branch"}`,"aria-labelledby":void 0})}):(0,r.jsx)(h.K,{icon:d.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),x[16]=R,x[17]=j,x[18]=k,x[19]=S):S=x[19],x[20]!==O||x[21]!==E||x[22]!==P||x[23]!==j||x[24]!==k?(_=O&&(k?(0,r.jsx)(l.b,{repo:k,branch:j||k.defaultBranch,selectedAgent:P,onSelectAgent:e=>E(e),iconOnly:!0}):(0,r.jsx)(m.f,{width:"32px",height:"32px"})),x[20]=O,x[21]=E,x[22]=P,x[23]=j,x[24]=k,x[25]=_):_=x[25],x[26]!==y||x[27]!==S||x[28]!==_?(I=(0,r.jsx)(s.Fn,{children:(0,r.jsxs)("div",{className:"RepoBranchAgentSelector-module__container--gHrlH",children:[y,S,_]})}),x[26]=y,x[27]=S,x[28]=_,x[29]=I):I=x[29],I};function b(e){return!!(e.userCanRequestCca||e.userCanGrantOrgCca||e.userCanGrantEnterpriseCca||e.userHasRequestedCca)}async function v(e="",t,n){let r=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&r.searchParams.set("q",e.trim()),t&&r.searchParams.set("defaultOwner",t),n&&r.searchParams.set("includeInTopRepos",n);let a=await (0,u.lS)(r.href);if(a.ok){let{repositories:e}=await a.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty,userHasRequestedCca:e.userHasRequestedCca,userCanRequestCca:e.userCanRequestCca,userCanGrantOrgCca:e.userCanGrantOrgCca,userCanGrantEnterpriseCca:e.userCanGrantEnterpriseCca,businessSlug:e.businessSlug}))}return[]}try{y.displayName||(y.displayName="RepoBranchAgentPicker")}catch{}function C(e){return e.enabled}},95869:(e,t,n)=>{n.d(t,{n:()=>l});var r=n(96379),a=n(97286);function l(e){return(0,a.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,r.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},97189:(e,t,n)=>{n.d(t,{Fn:()=>i,eS:()=>o});var r=n(74848),a=n(21728),l=n(96540);let s=(0,l.createContext)(void 0);function o(){let e=(0,l.useContext)(s);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function i(e){let t,n,o,i,u=(0,a.c)(7),{children:d}=e,[m,h]=(0,l.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(c),n=()=>h(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==m?(o={numberOf401s:m,increment401s:t,reset401s:n},u[2]=m,u[3]=o):o=u[3];let p=o;return u[4]!==d||u[5]!==p?(i=(0,r.jsx)(s.Provider,{value:p,children:d}),u[4]=d,u[5]=p,u[6]=i):i=u[6],i}function c(e){return e+1}try{s.displayName||(s.displayName="ConsecutiveCAPI401sContext")}catch{}try{i.displayName||(i.displayName="ConsecutiveCAPI401sProvider")}catch{}}}]);
//# sourceMappingURL=52302-7bd3b84e37e5.js.map